---
title: "【コピペOK】技術的負債を作らないためのルールを設定しよう（Claude Code, Codex, Cursor対応）"
url: "https://zenn.dev/tmasuyama1114/articles/global_rule_file"
date: 2025-10-10
tags: [readitlater, web-clip, AI-coding, quality-assurance, best-practices]
---

# 【コピペOK】技術的負債を作らないためのルールを設定しよう（Claude Code, Codex, Cursor対応）

**🔗 URL**: [【コピペOK】技術的負債を作らないためのルールを設定しよう（Claude Code, Codex, Cursor対応）](https://zenn.dev/tmasuyama1114/articles/global_rule_file)  
**📅 Date**: 2025-10-10

## 📄 Original Content

AI駆動開発において、コードが「動く」ことは最低限の要件であり、実際の開発現場では品質・保守性・安全性が重要となる。Claude Code、Codex、CursorなどのAIコーディングツールに対して「ルールファイル」（メモリファイル）を設定することで、AIが常に高品質なコードを生成するよう制御できる。本記事では、各ツールでの具体的な設定方法と、コピペで使える実用的なルールテンプレートを提供し、初心者でも長期的に保守可能なコードを書けるようにする実践的ガイド。

## 🎯 Summary

- **ルールファイルの本質**: AIに「動くコード」ではなく「品質・保守性・安全性を意識したコード」を生成させるための共通指示書で、開発の基本理念とコーディング規律を定義
- **3大ツール対応設定**: Claude Code（CLAUDE.md）、Codex（AGENTS.md）、Cursor（.cursor/rules/*.mdc）それぞれの設定方法を詳解し、即座に実践可能な手順を提供
- **5つの開発原則**: ボーイスカウトルール、徹底的エラーハンドリング、DRY原則、テスト規律、段階的リファクタリングによる品質担保の体系化
- **技術的負債の予防**: エラー抑制（@ts-ignore等）や重複コード、Broken Windows（小さな問題の放置）を根本から防ぎ、長期的な保守性を確保
- **段階別品質バランス**: プロトタイプ・MVP・本番環境それぞれの段階に応じた適切な品質基準を設定し、過度な完璧主義と技術的負債のバランスを実現

## 📊 AIコーディングツール別設定方法

| ツール | ルールファイル名 | 保存場所 | 設定コマンド | 特徴 |
|---|---|---|---|---|
| **Claude Code** | CLAUDE.md | プロジェクトルート | `/memory`コマンドで編集 | 階層的構造対応、サブディレクトリ可 |
| **Codex** | AGENTS.md | `~/.codex/` | `mkdir -p ~/.codex && touch ~/.codex/AGENTS.md` | グローバル設定、全プロジェクト共通 |
| **Cursor** | *.mdc | `.cursor/rules/` | GUI設定または手動ファイル作成 | VS Codeベース、視覚的設定可能 |

## 📋 AI駆動開発 共通ガイドライン（コピペ用テンプレート）

### 開発の基本理念
```markdown
# AI駆動開発 共通ガイドライン

## 開発の基本理念
- 動くコードを書くだけでなく、品質・保守性・安全性を常に意識する
- プロジェクトの段階（プロトタイプ、MVP、本番環境）に応じて適切なバランスを取る
- 問題を見つけたら放置せず、必ず対処または明示的に記録する
- ボーイスカウトルール：コードを見つけた時よりも良い状態で残す
```

### エラーハンドリングの原則
```markdown
## エラーハンドリングの原則
- 関連が薄く見えるエラーでも必ず解決する
- エラーの抑制（@ts-ignore、try-catchで握りつぶす等）ではなく、根本原因を修正
- 早期にエラーを検出し、明確なエラーメッセージを提供
- エラーケースも必ずテストでカバーする
- 外部APIやネットワーク通信は必ず失敗する可能性を考慮
```

### コード品質の基準
```markdown
## コード品質の基準
- DRY原則：重複を避け、単一の信頼できる情報源を維持
- 意味のある変数名・関数名で意図を明確に伝える
- プロジェクト全体で一貫したコーディングスタイルを維持
- 小さな問題も放置せず、発見次第修正（Broken Windows理論）
- コメントは「なぜ」を説明し、「何を」はコードで表現
```

### テスト規律
```markdown
## テスト規律
- テストをスキップせず、問題があれば修正する
- 実装詳細ではなく振る舞いをテスト
- テスト間の依存を避け、任意の順序で実行可能に
- テストは高速で、常に同じ結果を返すように
- カバレッジは指標であり、質の高いテストを重視
```

### 保守性とリファクタリング
```markdown
## 保守性とリファクタリング
- 機能追加と同時に既存コードの改善を検討
- 大規模な変更は小さなステップに分割
- 使用されていないコードは積極的に削除
- リファクタリング前後でテストが通ることを確認
- 技術的負債は記録し、計画的に返済
```

## 📊 開発段階別の品質バランス

| 段階 | 品質重視度 | テスト要件 | リファクタリング | エラーハンドリング |
|---|---|---|---|---|
| **プロトタイプ** | 低 | 最小限 | 不要 | 基本的なもののみ |
| **MVP** | 中 | 主要機能のみ | 必要に応じて | 重要なケースのみ |
| **本番環境** | 高 | 包括的 | 継続的実施 | 徹底的に実装 |

## 📊 技術的負債の主要原因と対策

| 負債の種類 | 具体例 | 対策 | AIへの指示 |
|---|---|---|---|
| **エラー抑制** | @ts-ignore、空catch | 根本原因の修正 | エラー抑制を禁止 |
| **重複コード** | コピペコード | DRY原則適用 | 関数・モジュール化 |
| **小さな問題放置** | 未使用変数、警告無視 | 即座に修正 | Broken Windows理論 |
| **テスト不足** | 手動テストのみ | 自動テスト実装 | テストファースト |
| **不明瞭な命名** | tmp、data等 | 意図を表現 | 意味のある名前 |

## 📊 ツール間のルールファイル互換性

| 機能 | Claude Code | Codex | Cursor | 互換性 |
|---|---|---|---|---|
| 基本的なルール記述 | ○ | ○ | ○ | 高 |
| 階層的構造 | ○ | △ | ○ | 中 |
| プロジェクト固有設定 | ○ | △ | ○ | 高 |
| グローバル設定 | ○ | ○ | ○ | 高 |
| GUI設定 | △ | × | ○ | 低 |

### ツール間でのルール共有手法

**1. シンボリックリンクによる統一管理**
```bash
# AGENTS.mdをマスターとし、CLAUDE.mdをリンク
ln -s AGENTS.md CLAUDE.md
```

**2. rulesyncツールによる一括管理**
```bash
# 全ツールのルールを.rulesync/*.mdで統一管理
npx rulesync generate
```

**3. 手動コピー管理**
- 各ツールのルールファイルを個別に更新
- 定期的な同期が必要

## 💭 My Notes

- 品質保証の観点から、AIコーディングツールへのルール設定は「自動検査仕様書」に相当し、コード生成段階での品質作り込みを実現
- エラーハンドリング原則は半導体テスト設計における「フェイルセーフ設計」と同様の思想で、早期検出・明確な診断が重要
- DRY原則とBroken Windows理論の組み合わせは、製品設計における「設計標準化」と「小さな不具合の即時対応」に通じる
- 段階別品質バランスは製品開発のフェーズゲート管理と類似し、開発ステージに応じた適切な品質基準設定が効率化の鍵
- 子供のプログラミング教育においても、最初から「動くだけでなく良いコード」を意識させる教育ツールとして活用可能
- データ分析における再現性確保のため、Python分析スクリプトにも同様のルールファイル適用が有効

## ⭐ Rating
Important: ⭐⭐⭐⭐⭐

---

**関連記事参照**:
- [Claude CodeのHooksは設定したほうがいい](hatena_claude_hooks_summary.md) - システムレベルでの品質担保
- [Claude Codeを「第二の自分」にする](qiita_claude_obsidian_summary.md) - エージェント自律化との相乗効果
- [Cursor rulesチュートリアル](https://zenn.dev/yuucu/articles/cursor-rules-tutorial) - 段階的ルール設計の実践例